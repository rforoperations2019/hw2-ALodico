---
title: "ALodico-HW2"
author: "ASL"
date: "10/3/2019"
output: html_document
---
#push commit seems to not be working. Instead, update file,
#go to the folder in github/hw2, and drag and drop into desktop
#version of github in the hw2-ALodico folder, Alodico-HW2 subforlder, 
#then click on upload files. Drag and drop this file into there.


Each Map will include:

#    A Basemap
# check    One map with a layer of points - Students may use either circles or markers
# check    One map with a layer of lines
# check   One map with a layer of polygons
#    One of the maps must contain a variable which changes of the color of the elements or the marker with an accompanying legend
#    One map must contain a functioning layersControl() with two basemaps and two different layers (by name do not need to be a different type of layer)



```{r setup, include=FALSE}
library(leaflet)
library(rgdal)
##line file for Pgh Bridges
bridges <- readOGR("https://data.wprdc.org/dataset/d6e6c012-45f0-4e13-ab3b-9458fd56ad96/resource/c972b2cc-8396-4cd0-80d6-3051497da903/download/bridges_img.geojson")
##point file for Pgh trash cans
smarttrash <- readOGR("https://data.wprdc.org/dataset/b1282e47-6a70-4f18-98df-f081e7406e34/resource/5c7edf21-421c-40ec-b851-d55aa5b3585f/download/smart_trash_containers.geojson")
#line file for Port Authority routes
#crs <- leafletCRS()

#Below doesnt work b/c in a zip. 
#patlines <- readOGR("https://data.wprdc.org/dataset/6be8185a-7fc3-48c7-9b8d-716602ea03f0/resource/a31608ba-e351-4081-9b96-84fac2df2746/download/paac_routes_1903final.zip")
#this worked, sort of, but then I had issues coaxing it into lines
#PATlines <- readOGR(dsn = "C:/Users/TonyatCMU/Desktop/R4Ops/ALodico-HW2/PAAC_Routes_1903final" 
#                    , layer = "PAAC_Routes_1903final" 
                    # , GDAL1_integer64_policy = TRUE
#                    )
```

```{r setup, include=FALSE}
wards <- readOGR("http://pghgis-pittsburghpa.opendata.arcgis.com/datasets/dff605f73fe24791875567f1d942275d_0.geojson")
precincts <- readOGR("http://openac-alcogis.opendata.arcgis.com/datasets/faaf42d7eaa041cb9fa623ac7b42f475_0.geojson")

```

```{r setup, include=FALSE}
general16 <- read.csv("https://data.wprdc.org/dataset/ea85f4b5-0b95-41b8-86ee-f1e6d16fc409/resource/3e8b23b7-aa71-4850-9379-bce87f73d684/download/2016-general-election-results-by-precinct.csv")
```


## R Markdown



```{r}
#point map
mp <- leaflet() %>%
  addTiles() %>%
  addMarkers(data = smarttrash)
mp
#trashy
```

## The Line file


```{r}
ml <- leaflet() %>%
  addTiles() %>%
  addPolylines(data = bridges)
ml

```

```{r}
library(dplyr)
library(tigris)
gen16total <- general16 %>%
  filter(Contest.Title == "BALLOTS CAST - TOTAL")

precinctvotes <- geo_join(precincts, gen16total, "Muni_War_1", "Precinct.Name")


#bins <- c(0, 10, 20, 30, 50, 100, 300, 300, 500, Inf)
pal <- colorBin("YlOrRd", domain = precinctvotes$Votes)


#precinctvotes$Votes

#filter by Contest.Title = "BALLOTS CAST - TOTAL"

ms <- leaflet() %>%
  addTiles() %>%
#  addProviderTiles(providers$Stamen.TonerLite) %>%
  addPolygons(data = precinctvotes,
              fillColor = ~pal(precinctvotes$Votes),
              fillOpacity = 0.8)
  # addLegend(pal = pal, 
  #           values = precinctvotes$Votes, 
  #           position = "bottomright", 
  #           title = "2016 Vote totals by precinct")
ms

```
